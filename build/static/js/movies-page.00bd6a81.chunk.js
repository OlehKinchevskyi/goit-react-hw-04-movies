(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[4],{52:function(e,t,n){"use strict";var r="99b92b74df9bbace873ae013dcdaea30",c="https://api.themoviedb.org/3/",o="https://image.tmdb.org/t/p/".concat("w500","/");var a={IMG_URL:o,defaultImage:"".concat(o,"wwemzKWzjKYJFfCeiB57q3r4Bcm.png"),fetchTrendingMovies:function(){return fetch("".concat(c,"trending/all/day?api_key=").concat(r)).then((function(e){return e.json()})).then((function(e){return e.results})).then((function(e){return e.filter((function(e){return"movie"===e.media_type}))}))},fetchMoviesWithQuery:function(e){return fetch("".concat(c,"search/movie?api_key=").concat(r,"&language=en-US&query=").concat(e,"&page=1&include_adult=false")).then((function(e){return e.json()})).then((function(e){return e.results}))},fetchMovieDetails:function(e){return fetch("".concat(c,"movie/").concat(e,"?api_key=").concat(r,"&language=en-US")).then((function(e){return e.json()}))},fetchMovieCast:function(e){return fetch("".concat(c,"movie/").concat(e,"/credits?api_key=").concat(r,"&language=en-US")).then((function(e){return e.json()}))},fetchMovieReviews:function(e){return fetch("".concat(c,"movie/").concat(e,"/reviews?api_key=").concat(r,"&language=en-US&page=1")).then((function(e){return e.json()})).then((function(e){return e.results}))}};t.a=a},58:function(e,t,n){"use strict";var r=n(1),c=(n(0),n(10)),o=n(3),a=n(8);t.a=Object(o.g)((function(e){var t=e.movies,n=e.location;return Object(r.jsx)("ul",{children:t&&t.map((function(e){var t=e.id,o=e.title;return Object(r.jsx)("li",{children:Object(r.jsx)(c.b,{to:{pathname:"".concat(a.a.movies,"/").concat(t),state:{from:n}},children:o})},t)}))})}))},65:function(e,t,n){},66:function(e,t,n){"use strict";var r=n(67),c=n(11);function o(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function a(e){return Array.isArray(e)?e.sort():"object"===typeof e?a(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=c({arrayFormat:"none"},t)),r=Object.create(null);return"string"!==typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),c=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),n(decodeURIComponent(c),o,r)})),Object.keys(r).sort().reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?e[t]=a(n):e[t]=n,e}),Object.create(null))):r},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[o(t,e),"[",r,"]"].join(""):[o(t,e),"[",o(r,e),"]=",o(n,e)].join("")};case"bracket":return function(t,n){return null===n?o(t,e):[o(t,e),"[]=",o(n,e)].join("")};default:return function(t,n){return null===n?o(t,e):[o(t,e),"=",o(n,e)].join("")}}}(t=c({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(r){var c=e[r];if(void 0===c)return"";if(null===c)return o(r,t);if(Array.isArray(c)){var a=[];return c.slice().forEach((function(e){void 0!==e&&a.push(n(r,e,a.length))})),a.join("&")}return o(r,t)+"="+o(c,t)})).filter((function(e){return e.length>0})).join("&"):""}},67:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},68:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var r=n(1);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=n(53),u=n(54),s=n(56),f=n(55),l=n(0),h=n(57),p=(n(65),n(66)),v=n.n(p);function b(e){return v.a.parse(e)}n(68);var d=function(e){Object(s.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={value:""},e.handleChange=function(t){e.setState({value:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault();var n=e.state.value;""!==n.trim()?(e.props.onSubmit(n),e.setState({value:""})):Object(h.b)("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442")},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.value;return Object(r.jsx)("div",{className:"Searchbar",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,className:"SearchForm",children:[Object(r.jsx)("input",{className:"SearchFormInput",type:"text",name:"query",value:e,onChange:this.handleChange,autoComplete:"off",autoFocus:!0}),Object(r.jsx)("button",{type:"submit",className:"SearchFormButton",children:"Search"})]})})}}]),n}(l.Component),j=n(52),m=n(15),y=n(58),g=function(e){Object(s.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={movies:[],loading:!1,error:null},e.fetchMovies=function(t){e.setState({loading:!0}),j.a.fetchMoviesWithQuery(t).then((function(t){0===t.length&&h.b.error("\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e..."),e.setState({movies:t})})).catch((function(t){h.b.error(t.message),e.setState({error:t.message})})).finally((function(){return e.setState({loading:!1})}))},e.handleChangeQuery=function(t){e.props.history.push(a(a({},e.props.location),{},{search:"query=".concat(t)}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=b(this.props.location.search).query;e&&this.fetchMovies(e)}},{key:"componentDidUpdate",value:function(e){var t=b(e.location.search).query,n=b(this.props.location.search).query;t!==n&&this.fetchMovies(n)}},{key:"render",value:function(){var e=this.state,t=e.movies,n=e.loading;return Object(r.jsxs)("div",{className:"MainContainer",children:[Object(r.jsx)(d,{onSubmit:this.handleChangeQuery}),n?Object(r.jsx)(m.a,{}):Object(r.jsx)(y.a,{movies:t}),Object(r.jsx)(h.a,{})]})}}]),n}(l.Component);g.defaultProps={}}}]);
//# sourceMappingURL=movies-page.00bd6a81.chunk.js.map